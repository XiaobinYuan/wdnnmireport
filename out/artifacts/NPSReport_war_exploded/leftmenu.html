<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <!-- jstree css样式 -->
    <link rel="stylesheet" href="js/style.min.css" />

</head>
<body>
<!-- 设置容器元素 -->
<div id="jstree"></div>
<link rel="stylesheet" href="js/style.min.css" />
<!-- jquery.js -->
<script src="js/jquery.min.js"></script>
<!-- jstree js核心文件 -->
<script src="js/jstree.min.js"></script>
<script src="js/highcharts.js"></script>
<script src="js/exporting.js"></script>
<script src="js/oldie.js"></script>
<script type="text/javascript">
    // $.get("initMap");
    $(function(){
        //当DOM准备好时创建一个jstree实例
        $('#jstree').jstree({
            //core 存储核心的所有默认值
            'core' : {'data' : [
                    {
                        "id":"1",
                        "parent":"#",
                        "text":"重点监控设备CPU/Mem使用率"
                    },
                    {
                        "id":"2",
                        "parent":"#",
                        "text":"全网设备可用性"
                    },
                    {
                        "id":"3",
                        "parent":"#",
                        "text":"重点监控设备可用性"
                    },
                    {
                        "id":"4",
                        "parent":"#",
                        "text":"重点监控设备端口可用率"
                    },
                    {
                        "id":"5",
                        "parent":"#",
                        "text":"北京廊坊裸光纤A带宽使用情况"

                    },
                    {
                        "id":"6",
                        "parent":"#",
                        "text":"北京廊坊互联网带宽使用率报表"

                    }
                ]}
        }).bind("select_node.jstree", function(event, data) {
            var id =getSelectNodeId();
            var strDate = GetDateStr(-7);
            var end = GetDateStr(0);

            if (id == 1){
                self.parent.frames['main'].hideTimeRange()
                self.parent.frames['main'].setDefaultTime();
                self.parent.frames['main'].setReportid(id);
                // self.parent.frames['main'].cpuMemTable(strDate, end,id);//refreshtable
                self.parent.frames['main'].refreshtable(strDate, end,id);
            }
            else if(id==5){
                self.parent.frames['main'].hideTimeRange()
                self.parent.frames['main'].setDefaultTime();
                self.parent.frames['main'].setReportid(id);
                self.parent.frames['main'].chart5(strDate,end,id);

            }else if(id==3){
                self.parent.frames['main'].hideTimeRange()
                self.parent.frames['main'].setDefaultTime();
                self.parent.frames['main'].setReportid(id);
                self.parent.frames['main'].refreshtable(strDate,end,id);
            }else if(id==2){
                self.parent.frames['main'].hideTimeRange()
                self.parent.frames['main'].setDefaultTime();
                self.parent.frames['main'].setReportid(id);
                self.parent.frames['main'].refreshtable(strDate,end,id);
            }else if(id==4){
                self.parent.frames['main'].hideTimeRange()
                self.parent.frames['main'].setDefaultTime();
                self.parent.frames['main'].setReportid(id);
                self.parent.frames['main'].refreshtable(strDate,end,id);
            }else if(id==6){
                self.parent.frames['main'].hideTimeRange()
                self.parent.frames['main'].setDefaultTime();
                self.parent.frames['main'].setReportid(id);
                self.parent.frames['main'].broadband(strDate,end,id);
            }
        }); //endInaterfacevailTable
    });


    function getSelectNodeId() {
        var treeNode = $('#jstree').jstree(true).get_selected(true)[0]; //获取所有选中的节点对象
        var nodeId = treeNode.original.id;
        return nodeId;

    }
    function GetDateStr(AddDayCount) {
        var dd = new Date();
        dd.setDate(dd.getDate()+AddDayCount);//获取AddDayCount天后的日期
        var y = dd.getFullYear();
        var m = (dd.getMonth()+1)<10?"0"+(dd.getMonth()+1):(dd.getMonth()+1);//获取当前月份的日期，不足10补0
        var d = dd.getDate()<10?"0"+dd.getDate():dd.getDate();//获取当前几号，不足10补0
        return y+"-"+m+"-"+d;
    }

</script>
</body>
</html>